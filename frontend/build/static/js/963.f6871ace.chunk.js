"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[963],{963:(e,a,s)=>{s.r(a),s.d(a,{default:()=>l});var n=s(555),t=s(43),r=s(674),i=s(579);function l(e){let{onClose:a}=e;const[s,l]=(0,t.useState)([]),[d,c]=(0,t.useState)({username:"",name:"",password:"",is_admin:!1}),[o,m]=(0,t.useState)(!1),[g,p]=(0,t.useState)([]),[x,u]=(0,t.useState)(!1),h=async()=>{try{const e=await r.A.get("/admin/agents");l(e.data||[])}catch(e){}};(0,t.useEffect)((()=>{h()}),[]),(0,t.useEffect)((()=>{(async()=>{try{const e=await r.A.get("/admin/tag-options");p(Array.isArray(e.data)?e.data:[])}catch(e){}})()}),[]);const b="".concat(window.location.origin,"/?inbox=shared"),y=(e,a,s)=>{p((t=>t.map(((t,r)=>r===e?(0,n.A)((0,n.A)({},t),{},{[a]:s}):t))))};return(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:a,children:(0,i.jsxs)("div",{className:"w-[720px] max-w-[90vw] bg-gray-900 border border-gray-700 rounded-lg p-4",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold",children:"Admin Dashboard"}),(0,i.jsx)("button",{className:"px-2 py-1 bg-gray-700 rounded",onClick:a,children:"\u2715"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"border border-gray-800 rounded p-3",children:[(0,i.jsx)("h3",{className:"font-medium mb-2",children:"Add Agent"}),(0,i.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d.username&&d.password){m(!0);try{await r.A.post("/admin/agents",d),c({username:"",name:"",password:"",is_admin:!1}),await h()}finally{m(!1)}}},className:"flex flex-col gap-2",children:[(0,i.jsx)("input",{className:"p-2 bg-gray-800 rounded",placeholder:"username",value:d.username,onChange:e=>c((0,n.A)((0,n.A)({},d),{},{username:e.target.value}))}),(0,i.jsx)("input",{className:"p-2 bg-gray-800 rounded",placeholder:"name (optional)",value:d.name,onChange:e=>c((0,n.A)((0,n.A)({},d),{},{name:e.target.value}))}),(0,i.jsx)("input",{className:"p-2 bg-gray-800 rounded",type:"password",placeholder:"password",value:d.password,onChange:e=>c((0,n.A)((0,n.A)({},d),{},{password:e.target.value}))}),(0,i.jsxs)("label",{className:"text-sm flex items-center gap-2",children:[(0,i.jsx)("input",{type:"checkbox",checked:d.is_admin,onChange:e=>c((0,n.A)((0,n.A)({},d),{},{is_admin:e.target.checked}))}),"Make admin"]}),(0,i.jsx)("button",{disabled:o,className:"mt-1 px-3 py-2 bg-blue-600 rounded disabled:opacity-50",children:o?"Saving\u2026":"Create / Update"})]})]}),(0,i.jsxs)("div",{className:"border border-gray-800 rounded p-3",children:[(0,i.jsx)("h3",{className:"font-medium mb-2",children:"Agents"}),(0,i.jsxs)("div",{className:"space-y-2 max-h-64 overflow-auto",children:[s.map((e=>(0,i.jsxs)("div",{className:"flex items-center justify-between bg-gray-800 rounded p-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium",children:e.name||e.username}),(0,i.jsxs)("div",{className:"text-xs text-gray-400",children:[e.username,e.is_admin?" \xb7 admin":""]})]}),(0,i.jsx)("button",{className:"px-2 py-1 bg-red-600 rounded",onClick:()=>(async e=>{window.confirm("Delete agent ".concat(e,"?"))&&(await r.A.delete("/admin/agents/".concat(encodeURIComponent(e))),await h())})(e.username),children:"Delete"})]},e.username))),0===s.length&&(0,i.jsx)("div",{className:"text-sm text-gray-400",children:"No agents yet."})]})]})]}),(0,i.jsxs)("div",{className:"mt-4 border-t border-gray-800 pt-3",children:[(0,i.jsx)("h3",{className:"font-medium mb-1",children:"Shared Inbox Link"}),(0,i.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,i.jsx)("input",{className:"flex-1 p-2 bg-gray-800 rounded",readOnly:!0,value:b}),(0,i.jsx)("button",{className:"px-3 py-2 bg-gray-700 rounded",onClick:()=>navigator.clipboard.writeText(b),children:"Copy"})]}),(0,i.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Share this link with your agents to access the inbox. Use the filters to view per-agent tabs."})]}),(0,i.jsxs)("div",{className:"mt-4 border-t border-gray-800 pt-3",children:[(0,i.jsx)("h3",{className:"font-medium mb-2",children:"Tag Options (icon + label)"}),(0,i.jsxs)("div",{className:"space-y-2",children:[g.map(((e,a)=>(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("input",{className:"w-24 p-2 bg-gray-800 rounded",placeholder:"icon (emoji)",value:e.icon||"",onChange:e=>y(a,"icon",e.target.value)}),(0,i.jsx)("input",{className:"flex-1 p-2 bg-gray-800 rounded",placeholder:"label (e.g. Urgent)",value:e.label||"",onChange:e=>y(a,"label",e.target.value)}),(0,i.jsx)("button",{className:"px-2 py-2 bg-red-600 rounded",onClick:()=>(e=>p((a=>a.filter(((a,s)=>s!==e)))))(a),children:"Delete"})]},a))),0===g.length&&(0,i.jsx)("div",{className:"text-sm text-gray-400",children:"No tag options yet. Add some below."}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("button",{className:"px-3 py-2 bg-gray-700 rounded",onClick:()=>p((e=>[...e,{label:"",icon:""}])),children:"+ Add tag"}),(0,i.jsx)("button",{disabled:x,className:"px-3 py-2 bg-blue-600 rounded disabled:opacity-50",onClick:async()=>{u(!0);try{const e=g.filter((e=>(e.label||"").trim())).map((e=>({label:e.label.trim(),icon:(e.icon||"").trim()})));await r.A.post("/admin/tag-options",{options:e})}finally{u(!1)}},children:x?"Saving\u2026":"Save tags"})]})]}),(0,i.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"These options appear in the chat list filters and when editing conversation tags."})]})]})})}}}]);
//# sourceMappingURL=963.f6871ace.chunk.js.map